nohup: ignoring input
2026/02/27 06:41:33 Applied schema.sql successfully.
2026/02/27 06:41:33 PostgreSQL connected successfully.
2026/02/27 06:41:33 Starting background async ingestion workers...
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /api/v1/health            --> main.main.func1 (3 handlers)
[GIN-debug] GET    /api/v1/recommendation    --> main.handleRecommendation (3 handlers)
[GIN-debug] POST   /api/v1/chat              --> main.handleChat (3 handlers)
[GIN-debug] POST   /api/v1/webhook/whatsapp  --> main.handleWhatsAppWebhook (3 handlers)
2026/02/27 06:41:33 üöÄ AgriChain API listening on 0.0.0.0:8080
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://github.com/gin-gonic/gin/blob/master/docs/doc.md#dont-trust-all-proxies for details.
2026/02/27 06:41:33 [worker] Fetching data.gov.in live prices...
[GIN-debug] Listening and serving HTTP on 0.0.0.0:8080
2026/02/27 06:41:33 [worker] Fetching Open-Meteo weather updates...
2026/02/27 06:41:43 [worker] Failed to fetch live prices for Tomato: data.gov.in request failed: Get "https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070?api-key=579b464db66ec23bdd0000011380f4db44c14e7676f2d1587ed61b2c&format=json&filters[commodity]=Tomato&sort[arrival_date]=desc&limit=10": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
2026/02/27 06:41:53 [worker] Failed to fetch live prices for Wheat: data.gov.in request failed: Get "https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070?api-key=579b464db66ec23bdd0000011380f4db44c14e7676f2d1587ed61b2c&format=json&filters[commodity]=Wheat&sort[arrival_date]=desc&limit=10": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
2026/02/27 06:42:03 [worker] Failed to fetch live prices for Rice: data.gov.in request failed: Get "https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070?api-key=579b464db66ec23bdd0000011380f4db44c14e7676f2d1587ed61b2c&format=json&filters[commodity]=Rice&sort[arrival_date]=desc&limit=10": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
2026/02/27 06:42:03 [worker] Completed mandi price ingestion cycle.
[GIN] 2026/02/27 - 06:45:44 | 200 |      70.286¬µs |   10.74.231.180 | GET      "/api/v1/health"
2026/02/27 06:46:35 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 06:46:35 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 06:46:35 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 06:46:50 | 200 | 14.872192572s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=hi&lat=21.126579&lon=79.160208"
[GIN] 2026/02/27 - 06:47:12 | 200 |  5.887947678s |   10.74.231.217 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 06:47:18 | 200 |  4.300201273s |   10.74.231.217 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 06:47:31 | 200 |  2.839191531s |   10.74.231.217 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 06:47:44 | 200 |   3.48429894s |   10.74.231.217 | POST     "/api/v1/chat"
2026/02/27 06:47:58 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 06:47:58 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 06:47:58 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 06:48:03 | 200 |  5.060932176s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.126579&lon=79.160208"
[GIN] 2026/02/27 - 06:48:26 | 200 |  7.663945255s |   10.74.231.217 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 06:48:48 | 200 |   5.62063693s |   10.74.231.217 | POST     "/api/v1/chat"
2026/02/27 07:03:43 üìç Using location: lat=21.2093, lon=78.7919
2026/02/27 07:03:43 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:03:43 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:03:49 | 200 |  6.763153075s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.209318&lon=78.791862"
2026/02/27 07:06:57 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:06:57 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:06:57 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:07:05 | 200 |  7.690228366s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.126613&lon=79.160199"
2026/02/27 07:07:12 üìç Using location: lat=20.6046, lon=79.0579
2026/02/27 07:07:12 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:07:12 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:07:17 | 200 |  5.702134667s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=20.604552&lon=79.057928"
2026/02/27 07:07:25 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:07:25 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:07:25 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:07:29 | 200 |  4.342464822s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.126613&lon=79.160199"
2026/02/27 07:09:13 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:09:13 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:09:13 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 07:09:13 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:09:17 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:09:17 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:09:17 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:09:17 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 07:09:20 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:09:20 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:09:20 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:09:20 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:09:21 | 200 |  7.429779207s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=a7b8c9d0-1234-ef01-3456-789012345678&lang=en&lat=21.167572&lon=79.068928"
[GIN] 2026/02/27 - 07:09:22 | 200 |   5.35938199s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=f2a3b4c5-6789-3456-8901-234567890123&lang=en&lat=21.167572&lon=79.068928"
[GIN] 2026/02/27 - 07:09:25 | 200 |  4.792144912s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d6e7f8a9-0123-7890-2345-678901234567&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:09:27 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:09:27 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:09:27 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:09:27 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:09:30 | 200 |  3.586706764s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d6e7f8a9-0123-7890-2345-678901234567&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:25:45 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:25:45 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:25:45 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:25:50 | 200 |  5.595011694s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.126611&lon=79.160203"
2026/02/27 07:26:59 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:26:59 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:26:59 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:26:59 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 07:27:01 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:27:01 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:27:01 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 07:27:03 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:27:03 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:27:03 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:27:03 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:27:07 | 200 |  7.238179757s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d4e5f6a7-b890-12cd-ef12-345678901234&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:27:08 ‚ö† OSRM API failed ‚Äì using haversine fallback
[GIN] 2026/02/27 - 07:27:08 | 200 |  7.213731091s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:27:09 ‚ö† OSRM API failed ‚Äì using haversine fallback
2026/02/27 07:27:09 ‚ö† OSRM API failed ‚Äì using haversine fallback
[GIN] 2026/02/27 - 07:27:09 | 200 |  6.241356988s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=a3b4c5d6-7890-4567-9012-345678901234&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:27:17 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:27:17 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:27:17 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:27:17 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:27:21 | 200 |  4.067680372s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d4e5f6a7-b890-12cd-ef12-345678901234&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:27:22 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:27:22 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:27:22 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:27:22 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:27:26 | 200 |  4.398630025s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=e5f6a7b8-9012-cdef-1234-567890123456&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:27:32 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:27:32 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:27:32 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:27:32 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:27:37 | 200 |   4.30222712s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=b4c5d6e7-8901-5678-0123-456789012345&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:27:56 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:27:56 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:27:56 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:27:56 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 07:28:04 ‚ö† OSRM API failed ‚Äì using haversine fallback
2026/02/27 07:28:04 ‚ö† OSRM API failed ‚Äì using haversine fallback
[GIN] 2026/02/27 - 07:28:04 | 200 |  7.341277284s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=e7f8a9b0-1234-8901-3456-789012345678&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:28:27 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:28:27 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:28:27 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:28:27 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:28:31 | 200 |  3.241723792s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d6e7f8a9-0123-7890-2345-678901234567&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:28:41 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 07:28:41 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:28:41 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:28:45 | 200 |  3.447634019s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 07:35:44 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:35:44 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:35:44 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:35:49 | 200 |  5.320444725s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.126615&lon=79.160201"
2026/02/27 07:41:33 [worker] Fetching Open-Meteo weather updates...
2026/02/27 07:43:56 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:43:56 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:43:56 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:43:56 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:44:00 | 200 |  3.620786688s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d2e3f4a5-6789-3456-8901-234567890123&lang=en&lat=21.126615&lon=79.160201"
2026/02/27 07:50:30 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:50:30 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:50:30 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:50:30 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:50:35 | 200 |  5.547075607s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d2e3f4a5-6789-3456-8901-234567890123&lang=en&lat=21.126615&lon=79.160201"
2026/02/27 07:52:09 ‚ö† DB fetch crop failed: sql: no rows in result set ‚Äì using fallback
2026/02/27 07:52:09 üìç Using location: lat=21.1266, lon=79.1602
2026/02/27 07:52:09 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 07:52:09 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 07:52:14 | 200 |  5.729464649s |   10.74.231.217 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=d2e3f4a5-6789-3456-8901-234567890123&lang=en&lat=21.126615&lon=79.160201"
