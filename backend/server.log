nohup: ignoring input
2026/02/27 02:36:17 Applied schema.sql successfully.
2026/02/27 02:36:17 PostgreSQL connected successfully.
2026/02/27 02:36:17 Starting background async ingestion workers...
[GIN-debug] [WARNING] Creating an Engine instance with the Logger and Recovery middleware already attached.

[GIN-debug] [WARNING] Running in "debug" mode. Switch to "release" mode in production.
 - using env:	export GIN_MODE=release
 - using code:	gin.SetMode(gin.ReleaseMode)

[GIN-debug] GET    /api/v1/health            --> main.main.func1 (3 handlers)
[GIN-debug] GET    /api/v1/recommendation    --> main.handleRecommendation (3 handlers)
[GIN-debug] POST   /api/v1/webhook/whatsapp  --> main.handleWhatsAppWebhook (3 handlers)
2026/02/27 02:36:17 üöÄ AgriChain API listening on 0.0.0.0:8080
2026/02/27 02:36:17 [worker] Fetching Open-Meteo weather updates...
[GIN-debug] [WARNING] You trusted all proxies, this is NOT safe. We recommend you to set a value.
Please check https://github.com/gin-gonic/gin/blob/master/docs/doc.md#dont-trust-all-proxies for details.
[GIN-debug] Listening and serving HTTP on 0.0.0.0:8080
2026/02/27 02:36:17 [worker] Fetching data.gov.in live prices...
2026/02/27 02:36:23 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 02:36:23 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:36:23 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 02:36:23 [worker] Failed to fetch live prices for Tomato: data.gov.in returned status 502
[GIN] 2026/02/27 - 02:36:27 | 200 |  3.991273686s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 02:36:31 üìç Using location: lat=28.6139, lon=77.2090
2026/02/27 02:36:31 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:36:31 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 02:36:33 [worker] Failed to fetch live prices for Wheat: data.gov.in request failed: Get "https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070?api-key=579b464db66ec23bdd0000011380f4db44c14e7676f2d1587ed61b2c&format=json&filters[commodity]=Wheat&sort[arrival_date]=desc&limit=10": context deadline exceeded (Client.Timeout exceeded while awaiting headers)
2026/02/27 02:36:42 [worker] Failed to fetch live prices for Rice: data.gov.in returned status 502
2026/02/27 02:36:42 [worker] Completed mandi price ingestion cycle.
[GIN] 2026/02/27 - 02:36:43 | 200 | 12.388693091s |             ::1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=as"
2026/02/27 02:37:23 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 02:37:23 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:37:23 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 02:37:36 | 200 | 12.850593389s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=as&lat=21.167572&lon=79.068928"
2026/02/27 02:39:50 üìç Using location: lat=20.5907, lon=81.0706
2026/02/27 02:39:50 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:39:50 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 02:39:57 | 200 |  6.994262046s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=20.590679&lon=81.070624"
2026/02/27 02:40:04 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 02:40:04 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:40:04 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 02:40:10 | 200 |  5.548584125s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 02:40:20 üìç Using location: lat=23.3742, lon=79.9401
2026/02/27 02:40:20 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:40:20 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 02:40:23 | 200 |  3.074585876s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=23.374189&lon=79.940110"
2026/02/27 02:40:34 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 02:40:34 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 02:40:34 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 02:40:38 | 200 |  3.711428607s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 02:58:38 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 02:58:38 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 02:58:38 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
[GIN] 2026/02/27 - 02:58:46 | 200 |  8.043025847s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
[GIN] 2026/02/27 - 03:07:18 | 404 |       1.062¬µs |       127.0.0.1 | GET      "/api/v1/environment"
[GIN] 2026/02/27 - 03:07:18 | 404 |         791ns |       127.0.0.1 | GET      "/api/v1/anomalies"
2026/02/27 03:07:28 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 03:07:28 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 03:07:28 ‚ö† DB fetch mandi prices failed: <nil>
2026/02/27 03:07:34 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 03:07:34 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 03:07:34 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 03:07:36 | 200 |  7.741842797s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
[GIN] 2026/02/27 - 03:07:37 | 200 |   3.84110924s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 03:10:35 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 03:10:35 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 03:10:35 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 03:10:42 | 200 |  7.189012959s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
2026/02/27 03:10:59 üìç Using location: lat=21.1676, lon=79.0689
2026/02/27 03:10:59 ‚ö† DB fetch weather failed: pq: column "location" does not exist at position 4:13 (42703)
2026/02/27 03:10:59 ‚ö† DB fetch mandi prices failed: <nil>
[GIN] 2026/02/27 - 03:11:02 | 200 |  2.603924656s |       127.0.0.1 | GET      "/api/v1/recommendation?farmer_id=a1b2c3d4-e5f6-7890-abcd-ef1234567890&crop_id=c3d4e5f6-a7b8-9012-cdef-123456789012&lang=en&lat=21.167572&lon=79.068928"
[GIN] 2026/02/27 - 03:23:19 | 404 |         902ns |       127.0.0.1 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 03:23:20 | 404 |         882ns |       127.0.0.1 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 03:23:48 | 404 |         691ns |       127.0.0.1 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 03:24:12 | 404 |         891ns |       127.0.0.1 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 03:24:30 | 404 |         651ns |       127.0.0.1 | POST     "/api/v1/chat"
[GIN] 2026/02/27 - 03:24:43 | 404 |         571ns |       127.0.0.1 | POST     "/api/v1/chat"
